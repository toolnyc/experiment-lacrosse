Current State
-------------
- Issues with two broad categories of test suite:
    1. Displaying the email preview (perhaps this can be eliminated)
    2. Issues with vi.hoisted() and vi.mock() and the synchronicity or lack thereof of those functions
- Removed the DELETE line from `20250128000000_add_webhook_events_and_email_sent_at.sql` that triggers cart clearing logic inside the RPC function

To-Do
-----
- Validate the necessity of the email rendering function and how its test suite functions
- Validate the necessity of all of the mocking functions 
- Implement new cart clearing logic on client side with a protected API route like:
    - Runs: `DELETE FROM cart_items WHERE user_id = auth.uid();`
    - From: a dedicated, authenticated endpoint like `POST /api/cart/clear`

Possiblities / Ideas
--------------------
- Creating the email templates manually in the Resend dashboard rather than allow user to preview and customize them
- Remove those test suites all together and run more simple api health checks or investigate what it would look like to use a service like postman or something of the sort to do logging and health checks on deployment
